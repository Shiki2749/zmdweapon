<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>终末地武器属性工具</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: linear-gradient(120deg, #e0c3fc 0%, #8ec5fc 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'PingFang SC', sans-serif;
            padding: 20px;
        }

        /* 毛玻璃容器 */
        .glass-card {
            background: rgba(255, 255, 255, 0.65);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.4);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.1);
            border-radius: 2rem;
            width: 100%;
            max-width: 1000px;
            overflow: hidden;
            transition: all 0.5s ease;
        }

        /* 一级维度激活态 */
        .cat-active {
            background: white !important;
            color: #2563eb !important;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        /* 二级标签激活态 */
        .tag-active {
            background: #2563eb !important;
            color: white !important;
            transform: scale(1.05);
            border-color: transparent !important;
        }

        /* 1. 强制表格内容不换行 */
        td, th {
            white-space: nowrap; /* 核心代码：强制文字永远横着显示，不准折行 */
            min-width: 80px;     /* 给每个单元格设置一个最小宽度，保证不被挤扁 */
        }

        /* 2. 针对武器名称加宽，防止长名字挤在一起 */
        td:first-child {
            min-width: 120px;
            font-size: 1rem;    /* 稍微加大名字字体，方便手机点击 */
        }

        /* 3. 优化手机端表格容器，使其可以平滑滚动 */
        .overflow-x-auto {
            display: block;
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch; /* 让苹果手机滑动更顺滑 */
        }

        /* 4. 针对手机屏幕极窄时的微调 */
        @media (max-width: 640px) {
            .p-8 {
                padding: 1rem; /* 减小外边距，给表格腾出更多空间 */
            }
            table {
                font-size: 13px; /* 手机端稍微调小一点字体，可以看更多内容 */
            }
        }

        .transition-all { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        
        .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
</head>
<body>

    <div class="glass-card">
        <div class="p-8 border-b border-white/40 flex justify-between items-end">
            <div>
                <h1 class="text-2xl font-bold text-slate-800 tracking-tight">武器属性查询</h1>
                <p class="text-slate-500 text-sm mt-1">by Shiki</p>
            </div>
            <button id="resetBtn" class="px-5 py-2 bg-white/50 hover:bg-red-500 hover:text-white text-slate-600 rounded-full text-sm font-medium transition-all border border-white/50">
                重置
            </button>
        </div>

        <div class="p-8 space-y-8">
            <div id="categoryNav" class="flex p-1.5 bg-gray-200/30 rounded-2xl w-fit"></div>

            <div id="tagBox" class="bg-white/40 p-6 rounded-2xl border border-white/60 min-h-[100px]"></div>

            <div class="overflow-hidden rounded-2xl border border-white/60 bg-white/30">
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left">
                        <thead>
                            <tr id="tableHeader" class="bg-gray-100/40 text-slate-600 font-bold border-b border-white/40"></tr>
                        </thead>
                        <tbody id="tableBody" class="divide-y divide-white/30 text-slate-700"></tbody>
                    </table>
                </div>
                <div id="emptyState" class="hidden p-12 text-center text-slate-400 italic">
                    没有找到符合当前筛选条件的条目
                </div>
            </div>
        </div>
    </div>

    <script>
        // 1. 配置与数据
        const FILTER_CONFIG = [
            { id: 'ba', name: '基础属性', tags: ['敏捷', '力量', '意志', '智识', '主能力提升'] },
            { id: 'aa', name: '附加属性', tags: ['攻击','生命', '法术','灼热', '寒冷', '自然', '电磁', '物理','暴击率','终结技效率','治疗效率','源石技艺'] },
            { id: 'sa', name: '技能属性', tags: ['残暴','压制','追袭','粉碎','巧技','迸发','流转','效益','昂扬','附术','医疗','切骨','夜幕','强攻'] }
        ];

        const TABLE_COLUMNS = [
            { key: 'name', label: '武器' },
            { key: 'ba', label: '基础属性' },
            { key: 'aa', label: '附加属性' },
            { key: 'sa', label: '技能属性' },
            { key: 'star', label: '星级' },
            { key: 'type', label: '类型' }
        ];

        const myData = [
            { name: "宏愿", ba: "敏捷", aa: "攻击", sa: "附术", star: "6" ,type:"单手剑"},
            { name: "不知归", ba: "意志", aa: "攻击", sa: "流转", star: "6" ,type:"单手剑"},
            { name: "熔铸火焰", ba: "智识", aa: "攻击", sa: "夜幕", star: "6" ,type:"单手剑"},
            { name: "黯色火炬", ba: "智识", aa: "灼热", sa: "附术", star: "6" ,type:"单手剑"},
            { name: "扶摇", ba: "主能力提升", aa: "暴击率", sa: "夜幕", star: "6" ,type:"单手剑"},
            { name: "热熔切割器", ba: "意志", aa: "攻击", sa: "流转", star: "6" ,type:"单手剑"},
            { name: "显赫声名", ba: "主能力提升", aa: "物理", sa: "残暴", star: "6" ,type:"单手剑"},
            { name: "白夜新星", ba: "主能力提升", aa: "源石技艺", sa: "附术", star: "6" ,type:"单手剑"},
            { name: "钢铁余音", ba: "敏捷", aa: "物理", sa: "巧技", star: "5" ,type:"单手剑"},
            { name: "坚城铸造者", ba: "智识", aa: "终结技效率", sa: "昂扬", star: "5" ,type:"单手剑"},
            { name: "逐鳞3.0", ba: "力量", aa: "寒冷", sa: "压制", star: "5" ,type:"单手剑"},
            { name: "十二问", ba: "敏捷", aa: "攻击", sa: "附术", star: "5" ,type:"单手剑"},
            { name: "O.B.J.轻芒", ba: "敏捷", aa: "攻击", sa: "流转", star: "5" ,type:"单手剑"},
            { name: "仰止", ba: "敏捷", aa: "物理", sa: "夜幕", star: "5" ,type:"单手剑"},
            { name: "大雷斑", ba: "力量", aa: "生命", sa: "医疗", star: "6" ,type:"双手剑"},
            { name: "赫拉芬格", ba: "力量", aa: "攻击", sa: "迸发", star: "6" ,type:"双手剑"},
            { name: "典范", ba: "主能力提升", aa: "攻击", sa: "压制", star: "6" ,type:"双手剑"},
            { name: "昔日精品", ba: "意志", aa: "生命", sa: "效益", star: "6" ,type:"双手剑"},
            { name: "破碎君王", ba: "力量", aa: "暴击率", sa: "粉碎", star: "6" ,type:"双手剑"},
            { name: "探骊", ba: "力量", aa: "终结技效率", sa: "迸发", star: "5" ,type:"双手剑"},
            { name: "古渠", ba: "力量", aa: "源石技艺", sa: "残暴", star: "5" ,type:"双手剑"},
            { name: "终点之声", ba: "力量", aa: "生命", sa: "医疗", star: "5" ,type:"双手剑"},
            { name: "O.B.J.重荷", ba: "力量", aa: "生命", sa: "效益", star: "5" ,type:"双手剑"},
            { name: "负山", ba: "敏捷", aa: "物理", sa: "效益", star: "6" ,type:"长枪"},
            { name: "骁勇", ba: "敏捷", aa: "物理", sa: "巧技", star: "6" ,type:"长枪"},
            { name: "J.E.T.", ba: "主能力提升", aa: "攻击", sa: "压制", star: "6" ,type:"长枪"},
            { name: "嵌合正义", ba: "力量", aa: "终结技效率", sa: "残暴", star: "5" ,type:"长枪"},
            { name: "O.B.J.尖峰", ba: "意志", aa: "物理", sa: "附术", star: "5" ,type:"长枪"},
            { name: "向心之引", ba: "意志", aa: "电磁", sa: "压制", star: "5" ,type:"长枪"},
            { name: "艺术暴君", ba: "智识", aa: "暴击率", sa: "切骨", star: "6" ,type:"手铳"},
            { name: "领航者", ba: "智识", aa: "寒冷", sa: "附术", star: "6" ,type:"手铳"},
            { name: "楔子", ba: "主能力提升", aa: "暴击率", sa: "附术", star: "6" ,type:"手铳"},
            { name: "同类相食", ba: "主能力提升", aa: "法术", sa: "附术", star: "6" ,type:"手铳"},
            { name: "作品：众生", ba: "敏捷", aa: "法术", sa: "附术", star: "5" ,type:"手铳"},
            { name: "O.B.J.迅极", ba: "敏捷", aa: "终结技效率", sa: "迸发", star: "5" ,type:"手铳"},
            { name: "理性告别", ba: "力量", aa: "灼热", sa: "追袭", star: "5" ,type:"手铳"},
            { name: "使命必达", ba: "意志", aa: "终结技效率", sa: "追袭", star: "6" ,type:"施术单元"},
            { name: "沧溟星梦", ba: "智识", aa: "治疗效率", sa: "附术", star: "6" ,type:"施术单元"},
            { name: "作品：蚀迹", ba: "意志", aa: "自然", sa: "压制", star: "6" ,type:"施术单元"},
            { name: "爆破单元", ba: "主能力提升", aa: "源石技艺", sa: "迸发", star: "6" ,type:"施术单元"},
            { name: "遗忘", ba: "智识", aa: "法术", sa: "夜幕", star: "6" ,type:"施术单元"},
            { name: "骑士精神", ba: "意志", aa: "生命", sa: "医疗", star: "6" ,type:"施术单元"},
            { name: "悼亡诗", ba: "智识", aa: "攻击", sa: "夜幕", star: "5" ,type:"施术单元"},
            { name: "莫奈何", ba: "意志", aa: "终结技效率", sa: "昂扬", star: "5" ,type:"施术单元"},
            { name: "迷失荒野", ba: "智识", aa: "电磁", sa: "附术", star: "5" ,type:"施术单元"},
            { name: "布道自由", ba: "意志", aa: "治疗效率", sa: "医疗", star: "5" ,type:"施术单元"},
            { name: "O.B.J.术识", ba: "智识", aa: "源石技艺", sa: "追袭", star: "5" ,type:"施术单元"}
        ];

        let currentFilters = {};
        FILTER_CONFIG.forEach(c => currentFilters[c.id] = '');

        // 初始化
        function init() {
            const nav = document.getElementById('categoryNav');
            nav.innerHTML = FILTER_CONFIG.map((c, i) => `
                <button class="cat-btn ${i===0?'cat-active':'text-slate-500'} px-6 py-2 rounded-xl text-sm font-bold transition-all" 
                        data-id="${c.id}" data-index="${i}">${c.name}</button>
            `).join('');

            const tagBox = document.getElementById('tagBox');
            tagBox.innerHTML = FILTER_CONFIG.map((c, i) => `
                <div id="group-${c.id}" class="tag-group ${i!==0?'hidden':''} flex flex-wrap gap-3">
                    ${c.tags.map(t => `
                        <button class="filter-tag px-5 py-2.5 bg-white/80 border border-gray-200 rounded-xl text-sm font-medium text-slate-700 hover:border-blue-400 hover:bg-white transition-all shadow-sm" 
                                data-type="${c.id}" data-value="${t}">${t}</button>
                    `).join('')}
                </div>
            `).join('');

            document.getElementById('tableHeader').innerHTML = TABLE_COLUMNS.map(col => `
                <th class="px-6 py-4">${col.label}</th>
            `).join('');

            renderTable(myData);
            bindEvents();
            updateAvailableTags(); // 初始状态更新标签可见性
        }

        // 核心：动态更新可用标签逻辑
        function updateAvailableTags() {
            FILTER_CONFIG.forEach(config => {
                const type = config.id;
                const tagButtons = document.querySelectorAll(`[data-type="${type}"]`);

                tagButtons.forEach(btn => {
                    const val = btn.dataset.value;
                    
                    // 模拟：如果在当前已选条件下，再选这个标签，是否有数据？
                    const hasData = myData.some(item => {
                        return Object.keys(currentFilters).every(key => {
                            if (key === type) return item[key] === val;
                            return !currentFilters[key] || item[key] === currentFilters[key];
                        });
                    });

                    // 无数据则隐藏标签
                    btn.classList.toggle('hidden', !hasData);
                });
            });
        }

        function renderTable(items) {
            const tbody = document.getElementById('tableBody');
            const empty = document.getElementById('emptyState');
            empty.classList.toggle('hidden', items.length > 0);
            
            tbody.innerHTML = items.map(row => {
                // 根据星级定义颜色
                let starStyle = "";
                if (row.star === "6") {
                    starStyle = "text-orange-500 font-bold"; // 6星橙色，超重磅加粗
                } else if (row.star === "5") {
                    starStyle = "text-amber-500 ";  // 5星深黄色，加粗
                } else {
                    starStyle = "text-slate-500";             // 其他星级默认色
                }

                return `
                    <tr class="hover:bg-white/40 transition-colors border-t border-white/20">
                        ${TABLE_COLUMNS.map(col => {
                            // 给【武器名称】和【星级】列应用特殊颜色
                            const isHighlightCol = (col.key === 'name' || col.key === 'star');
                            const cellClass = isHighlightCol ? starStyle : "";
                            
                            return `<td class="px-6 py-4 ${cellClass}">${row[col.key] || '-'}</td>`;
                        }).join('')}
                    </tr>
                `;
            }).join('');
        }

        function bindEvents() {
            document.querySelectorAll('.cat-btn').forEach(btn => {
                btn.addEventListener('click', () => switchCategory(btn.dataset.index));
            });

            document.querySelectorAll('.filter-tag').forEach(tag => {
                tag.addEventListener('click', () => {
                    const { type, value } = tag.dataset;
                    const parentGroup = tag.parentElement;

                    if (currentFilters[type] === value) {
                        currentFilters[type] = '';
                        tag.classList.remove('tag-active');
                    } else {
                        parentGroup.querySelectorAll('.filter-tag').forEach(t => t.classList.remove('tag-active'));
                        currentFilters[type] = value;
                        tag.classList.add('tag-active');
                        
                        // 自动跳转下一步
                        const activeBtn = document.querySelector('.cat-active');
                        const nextIdx = parseInt(activeBtn.dataset.index) + 1;
                        if (nextIdx < FILTER_CONFIG.length) {
                            setTimeout(() => switchCategory(nextIdx), 300);
                        }
                    }
                    updateAvailableTags(); // 刷新后续标签可见性
                    applyFilters();
                });
            });
        }

        function switchCategory(index) {
            document.querySelectorAll('.cat-btn').forEach((b, i) => {
                b.classList.toggle('cat-active', i == index);
                b.classList.toggle('text-slate-500', i != index);
            });
            document.querySelectorAll('.tag-group').forEach((g, i) => g.classList.toggle('hidden', i != index));
        }

        function applyFilters() {
            const result = myData.filter(item => {
                return Object.keys(currentFilters).every(key => !currentFilters[key] || item[key] === currentFilters[key]);
            });
            renderTable(result);
        }

        document.getElementById('resetBtn').addEventListener('click', () => {
            Object.keys(currentFilters).forEach(k => currentFilters[k] = '');
            document.querySelectorAll('.filter-tag').forEach(t => {
                t.classList.remove('tag-active');
                t.classList.remove('hidden');
            });
            switchCategory(0);
            renderTable(myData);
        });

        init();
    </script>
</body>

</html>


